<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro Recebido - Mentoria em Licita√ß√£o</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* Fallback para evitar tela branca se o JS falhar */
        #fallback-message { display: none; }
        .no-js #fallback-message { display: block; }
        .no-js #thanksContent { display: none; }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <span class="logo-icon">üèÜ</span>
                    <span>Mentoria Licita√ß√£o</span>
                </a>
            </div>
        </div>
    </header>

    <section class="thanks-section">
        <div class="container">
            <!-- Conte√∫do Din√¢mico -->
            <div class="thanks-container fade-in" id="thanksContent">
                <div class="thanks-icon">‚è≥</div>
                <h1 class="thanks-title">Processando...</h1>
                <p class="thanks-message">Aguarde enquanto carregamos sua an√°lise.</p>
            </div>

            <!-- Fallback est√°tico (seguran√ßa) -->
            <div id="fallback-message" class="thanks-container">
                <div class="thanks-icon">‚úÖ</div>
                <h1 class="thanks-title">Cadastro Recebido!</h1>
                <p class="thanks-message">Obrigado pelo interesse. Nossa equipe entrar√° em contato em breve.</p>
                <a href="index.html" class="btn btn-primary">Voltar ao In√≠cio</a>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const leadDataString = sessionStorage.getItem('leadData');
            const container = document.getElementById('thanksContent');
            const fallback = document.getElementById('fallback-message');

            if (!leadDataString) {
                // Se n√£o houver dados, mostra fallback e esconde loading
                container.style.display = 'none';
                fallback.style.display = 'block';
                return;
            }

            try {
                const leadData = JSON.parse(leadDataString);
                displayThankYouContent(leadData);
                // Limpa dados ap√≥s 10s para seguran√ßa
                setTimeout(() => sessionStorage.removeItem('leadData'), 10000);
            } catch (error) {
                console.error('Erro:', error);
                container.style.display = 'none';
                fallback.style.display = 'block';
            }
        });

        function displayThankYouContent(leadData) {
            const container = document.getElementById('thanksContent');
            const { nome, classification, score, metaFaturamento, telefone } = leadData;
            
            const fmtMoney = val => parseFloat(val).toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});
            const fmtPhone = ph => ph.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');

            let content = '';

            if (classification === 'HOT') {
                content = `
                    <div class="thanks-icon hot">üî•</div>
                    <h1 class="thanks-title">Parab√©ns, ${nome}!</h1>
                    <div class="score-badge hot">PERFIL IDEAL: ${score} PONTOS</div>
                    
                    <p class="thanks-message">
                        Seu perfil √© <strong>EXCELENTE</strong> para dominar o mercado de licita√ß√µes! 
                        Sua meta de <strong>${fmtMoney(metaFaturamento)}</strong> √© totalmente alcan√ß√°vel.
                    </p>

                    <div class="alert alert-success" style="display:block; text-align:left;">
                        <h3 style="color:var(--success-color)">üéØ Selecionado para Prioridade</h3>
                        <p>Nossa equipe entrar√° em contato em at√© <strong>2 horas</strong> para uma consultoria expressa.</p>
                    </div>

                    <div class="next-steps">
                        <h3>Pr√≥ximos Passos:</h3>
                        <ul>
                            <li>Aguarde nossa liga√ß√£o no n√∫mero <strong>${fmtPhone(telefone)}</strong></li>
                            <li>Verifique seu e-mail para confirma√ß√£o</li>
                            <li>Prepare suas d√∫vidas para a reuni√£o</li>
                        </ul>
                    </div>
                `;
            } else if (classification === 'WARM') {
                content = `
                    <div class="thanks-icon warm">‚ö°</div>
                    <h1 class="thanks-title">Muito bem, ${nome}!</h1>
                    <div class="score-badge warm">BOM POTENCIAL: ${score} PONTOS</div>
                    
                    <p class="thanks-message">
                        Voc√™ tem um √≥timo potencial para crescer neste mercado. 
                        Vamos te ajudar a atingir sua meta de <strong>${fmtMoney(metaFaturamento)}</strong>.
                    </p>
                    
                    <div class="next-steps">
                        <h3>O que acontece agora:</h3>
                        <ul>
                            <li>Nossa equipe vai analisar seus dados</li>
                            <li>Entraremos em contato em at√© 24 horas</li>
                            <li>Enquanto isso, enviamos um material por e-mail</li>
                        </ul>
                    </div>
                `;
            } else {
                content = `
                    <div class="thanks-icon cold">üìö</div>
                    <h1 class="thanks-title">Obrigado, ${nome}!</h1>
                    <div class="score-badge cold">CADASTRO REALIZADO</div>
                    
                    <p class="thanks-message">
                        Recebemos suas informa√ß√µes. Para come√ßar, vamos te enviar 
                        um material introdut√≥rio gratuito sobre licita√ß√µes.
                    </p>
                    
                    <div class="next-steps">
                        <h3>Verifique seu e-mail:</h3>
                        <ul>
                            <li>Guia B√°sico de Licita√ß√µes (Enviado)</li>
                            <li>Checklist de Documenta√ß√£o</li>
                        </ul>
                    </div>
                    <a href="index.html" class="btn btn-primary mt-4">Voltar ao In√≠cio</a>
                `;
            }
            container.innerHTML = content;
        }
    </script>
</body>
</html>